# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a PocketBase MCP (Model Context Protocol) server that enables LLMs to interact with PocketBase instances through standardized tools. It follows the MCP specification to provide comprehensive access to PocketBase functionality.

## Key Dependencies

- `@modelcontextprotocol/sdk`: SDK for implementing the Model Context Protocol
- `pocketbase`: JavaScript/TypeScript client for PocketBase
- `zod`: Runtime type validation
- `typescript`: Programming language for type-safe JavaScript

## Project Setup

To set up the project for development:

```bash
# Install dependencies
npm install

# Build the project
npm run build
```

## Development Commands

```bash
# Run in development mode
npm run dev

# Build TypeScript to JavaScript
npm run build

# Run in production mode
npm start
```

## Project Structure

- `src/mcp-server.ts` - Main MCP server implementation with all tool definitions and handlers
- `dist/` - Compiled JavaScript output (generated by build)
- `pocketbase_docs/` - PocketBase documentation for reference

## Environment Variables

- `POCKETBASE_URL`: URL of your PocketBase instance (default: `http://127.0.0.1:8090`)

## MCP Tools Available

The server exposes the following tools:

### Collection Management
- `list_collections` - List all collections with pagination and filtering
- `get_collection` - Get a specific collection by ID or name
- `create_collection` - Create a new collection with schema
- `update_collection` - Update collection settings and schema
- `delete_collection` - Delete a collection

### Record Management
- `list_records` - List records with filtering, sorting, and pagination
- `get_record` - Get a specific record by ID
- `create_record` - Create a new record
- `update_record` - Update an existing record
- `delete_record` - Delete a record

### Authentication
- `auth_with_password` - Authenticate using email/username and password
- `create_user` - Create a new user in an auth collection

### System
- `get_health` - Check PocketBase health status
- `get_settings` - Get PocketBase settings (requires admin auth)
- `create_backup` - Create a backup (requires admin auth)
- `list_backups` - List available backups (requires admin auth)

## Usage with Claude Desktop

Add this configuration to your Claude Desktop MCP settings:

```json
{
  "mcpServers": {
    "pocketbase": {
      "command": "node",
      "args": ["/path/to/pocketbase-mcp-server/dist/mcp-server.js"],
      "env": {
        "POCKETBASE_URL": "http://localhost:8090"
      }
    }
  }
}
```

## Important Notes

- Admin operations require appropriate authentication
- The PocketBase instance must be running and accessible
- All tool responses return JSON formatted data
- Error handling is built into each tool operation

## Coding Guidelines

- Always reference the pocketbase docs before writing any pocketbase based code to make sure you are using the most update to date syntax.